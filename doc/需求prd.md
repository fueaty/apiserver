网站信息采集与多平台内容发布接口服务开发需求文档（更新版）

一、项目背景与目标
你好，我现在开发的一个项目遇到问题：
这个是我的项目背景与目标：
为支撑智能体工作流平台的自动化操作，需开发一套轻量级接口服务，专注提供网站信息采集、智能选材及多平台内容发布功能。该服务仅通过标准化接口对外提供能力，由智能体工作流平台调用以完成整体业务流程；服务器仅存储密钥与日志信息，不依赖数据库，且内容平台的认证信息、待发布内容均由智能体工作流侧通过请求传递，旨在实现轻量化、灵活化的信息处理与分发。
现在我遇到的问题是我的智能选材引擎不能正确选取到内容，请帮规划设计一个智能选取的引擎，最好基于机器学习、深度学习等算法进行优化，这个是我的核心需求：
🎯 智能选材引擎核心需求总结:
   1. 多平台适配能力
      - 支持微博、百度、知乎等不同内容平台
      - 针对不同平台特点定制选材策略
   2. 内容质量评估
      - 基于热度、排名等指标评估内容质量
      - 考虑时效性、互动潜力等因素
   3. 智能匹配算法
      - 匹配内容与平台用户偏好
      - 支持关键词、分类等多维度匹配
   4. 可配置的评分体系
      - 支持自定义权重和阈值
      - 灵活调整选材严格程度
   5. 可扩展性
      - 易于添加新的平台和评估维度
      - 支持不断优化的算法模型
json文件是传给选材引擎的数据，希望作为一个研发专家 的你帮我处理下，感谢

二、核心功能需求

身份验证接口

提供 POST 接口，支持智能体工作流平台提交认证凭证（如预设密钥、访问令牌等），验证通过后返回 authkey （接口调用凭证）。
authkey 需具备时效性与唯一性，作为后续所有接口调用的身份标识，未携带有效 authkey 的请求需被拒绝。
密钥存储方式：采用本地文件加密存储（如配置文件加密），不依赖数据库，确保轻量性与安全性。

网站信息采集接口

提供 GET 接口，支持智能体工作流平台携带有效 authkey 发起请求，触发指定采集任务。
接口参数设计（支持可选参数，基于本地配置实现扩展）：
必选参数：无（所有筛选条件均为可选，不传递时触发默认逻辑）。
可选参数：
date ：采集日期（格式：YYYY-MM-DD），指定需采集的目标日期内容；不传递时默认采集当天内容。
site_code ：目标网站编码（字符串，编码值预定义于本地配置文件），指定单一或多个网站（多值用逗号分隔）；不传递时默认采集所有已配置网站。
预留扩展字段：通过本地配置文件（如JSON、YAML）定义新增筛选条件（如 category 分类、 keyword 关键词等），新增字段时仅需更新配置文件，无需修改接口代码。
采集与清洗逻辑：实时采集目标网站内容，通过预设的本地清洗规则（如正则表达式、XPath解析规则，定义于本地配置文件）完成清洗，返回结构化内容（如纯文本、JSON格式字段数据，包含标题、正文、发布时间等核心信息）。
数据存储说明：采集与清洗后的内容不落地存储，仅通过接口实时返回给调用方。

智能选材接口

提供 POST 接口，支持智能体工作流平台携带有效 authkey 提交热点内容列表，获取平台差异化选材结果。
接口参数：
必选参数：
hotspots ：热点内容列表（JSON数组），包含标题、分类、摘要等字段
可选参数：
platforms ：目标平台列表（字符串数组），指定需要评估的平台；不传递时默认返回所有已配置平台的结果
threshold ：匹配度阈值（0-1），仅返回评分高于该值的结果；默认0.6
核心功能：
平台适配分析：根据各平台用户画像和内容偏好，计算热点内容与平台的匹配度
内容角度生成：针对每个平台生成适配的内容创作角度
策略推荐：推荐适合该平台的内容呈现策略
响应结果：返回包含平台、匹配度评分、推荐角度和策略的结构化数据
扩展机制：支持通过YAML配置文件新增平台规则，无需修改接口代码

多平台内容发布接口

提供 POST 接口，支持智能体工作流平台携带有效 authkey 提交以下信息：
待发布内容：包括文本、图片、视频等素材，及平台特定参数（如标题、标签、分类、发布时间等）。
目标平台标识：如 platform: "xiaohongshu" （小红书）、 platform: "zhihu" （知乎）等，指定发布平台。
平台认证信息：对应平台的调用凭证（如API密钥、访问令牌、Cookie等），由智能体工作流侧动态传递，服务端不存储。
接口功能：接收上述信息后，根据目标平台标识匹配本地预定义的发布适配规则（如接口调用格式、参数映射关系，定义于本地配置文件），向对应平台发起发布请求。
发布结果返回：实时返回执行结果（如发布成功标识、平台返回的内容ID、失败原因等），结果不落地存储，仅实时返回给调用方。

三、接口规范要求

交互方式：所有接口基于HTTP/HTTPS协议，支持 JSON 格式的请求参数与响应数据。
身份校验：除身份验证接口外，所有接口均需在请求头中携带 authkey ，服务端通过本地配置的密钥信息验证有效性。
响应格式：统一返回包含以下字段的JSON数据：

code ：状态码（200表示成功，401表示认证失败，400表示参数错误，500表示服务器异常）；
message ：描述信息（成功时返回“success”，失败时返回具体原因）；
data ：业务数据（成功时返回对应结果，失败时为null）。
智能选材接口详细规范：

端点： POST /api/v1/selection

请求体：

json
{
  "hotspots": [
    {
      "hotspot_id": "hotspot_001",
      "title": "AI技术最新发展趋势",
      "source": "科技媒体",
      "hot_value": 920000,
      "category": "科技",
      "collect_time": "2025-10-29 10:30:00",
      "summary": "人工智能领域的最新研究成果和应用案例..."
    }
  ],
  "platforms": ["xiaohongshu", "zhihu", "new_platform"],
  "threshold": 0.6
}


响应体：

json
{
  "code": 200,
  "message": "success",
  "data": {
    "selections": {
      "xiaohongshu": [
        {
          "hotspot_id": "hotspot_001",
          "title": "AI技术最新发展趋势",
          "suitability_score": 0.78,
          "content_angle": "视觉指南：AI技术的美丽应用瞬间",
          "recommended_strategy": "情感共鸣策略",
          "reason": "内容视觉呈现潜力大，符合年轻女性用户兴趣偏好"
        }
      ],
      "zhihu": [
        {
          "hotspot_id": "hotspot_001",
          "title": "AI技术最新发展趋势",
          "suitability_score": 0.92,
          "content_angle": "深度分析：AI技术背后的逻辑原理",
          "recommended_strategy": "知识分享策略",
          "reason": "话题深度足够，适合知识型用户讨论分析"
        }
      ]
    },
    "selection_criteria": {
      "strategy_used": "platform_optimized",
      "total_hotspots_analyzed": 1,
      "selection_timestamp": "2025-10-29T14:23:45Z"
    }
  }
}


四、非功能性需求

轻量性：不依赖数据库，通过本地配置文件管理静态规则（网站编码、清洗规则、平台发布适配格式等），降低部署与维护成本。
灵活性：支持智能体工作流侧动态传递平台认证信息与待发布内容，无需服务端预存储，适配多场景发布需求。
可调用性：接口需保持稳定可用，响应时间控制在合理范围（普通请求≤3秒，复杂采集/发布任务≤10秒），支持智能体工作流平台的批量或定时调用。
可维护性：配置文件需采用易读格式（如YAML），新增网站、筛选条件或发布平台适配规则时，仅需修改配置文件即可生效，无需调整核心代码。
安全性： authkey 及智能体工作流侧传递的平台认证信息均通过HTTPS传输；本地存储的密钥与配置文件需加密处理（如采用AES加密），防止信息泄露。
日志管理：本地文件记录接口调用日志（含调用时间、 authkey 、请求参数、执行结果、错误堆栈等），日志按时间分片存储，支持轮转，避免占用过多磁盘空间。
可扩展性：

平台扩展：通过配置文件即可新增支持的内容平台，无需修改核心代码
规则扩展：支持新增评分维度和策略算法，通过插件机制集成
接口扩展：预留版本控制机制，支持API接口的平滑升级

五、平台扩展机制详细说明

配置驱动扩展：

采用YAML格式配置文件定义平台特性和规则
支持热加载，配置更新后无需重启服务即可生效
配置项包括：目标受众、内容偏好、评分权重、内容角度模板等
新平台接入流程：

步骤1：在platforms.yaml中添加新平台配置
步骤2：通过配置验证工具检查配置完整性
步骤3：测试接口验证新平台的选材逻辑
步骤4：启用新平台（通过接口或配置文件）
配置示例：

yaml
new_platform:
  name: "新内容平台"
  selection_rules:
    target_audience: ["职场人士", "科技爱好者"]
    content_preferences: ["科技资讯", "职业发展", "效率工具"]
    content_style: "专业严谨, 数据支撑, 实操指导"
    optimal_length: "800-1500字"
    best_post_times: ["08:30-10:00", "18:30-20:00"]
    scoring_weights:
      content_match: 0.35
      audience_relevance: 0.35
      timeliness: 0.2
      engagement_potential: 0.1
    content_angles: [
      "专业评测：{}的深度解析",
      "实用指南：如何利用{}提升效率",
      "行业观察：{}对职场的影响"
    ]


六、其他说明

需提供详细的接口文档（如基于Swagger），明确各接口的请求参数（包括可选参数的默认值、格式约束）、数据类型、响应示例及错误码说明，方便智能体工作流平台集成。
采集功能需遵守目标网站的robots协议及相关法律法规，避免违规操作。
发布功能需适配各平台的API限制（如发布频率、内容格式、审核机制），相关限制规则可预定义于本地配置文件，接口调用时自动校验并返回提示。
智能选材功能需提供配置管理接口，支持查询和更新平台规则配置。